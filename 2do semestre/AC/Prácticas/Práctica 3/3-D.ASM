HAND EQU 40H
EST EQU 41H


ORG 1000H
 MSJ DB "INGRESE UN CARACTER:"
 CAR DB ?, ?, ?, ?, ?


ORG 2000H
 MOV AL, 01111111B
 OUT EST, AL
 MOV BX, OFFSET CAR
 PUSH BX
 MOV CL, 5
LOOP:MOV BX, OFFSET MSJ
 MOV AL, OFFSET CAR-OFFSET MSJ
 INT 7
 POP BX
 INT 6
 INC BX
 PUSH BX
 DEC CL
 JNZ LOOP
 
 MOV BX, OFFSET CAR
 MOV CL, 10
POLL:IN AL, EST
 AND AL, 1
 JNZ POLL
 CMP CL, 6
 JS INV
 MOV AL, [BX]
 OUT HAND, AL
 INC BX
 DEC CL
 JMP POLL
 
INV:DEC BX
 MOV AL, [BX]
 OUT HAND, AL
 DEC CL
 JNZ POLL

 HLT
 END
