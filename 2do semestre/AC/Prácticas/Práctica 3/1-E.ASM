PB EQU 31H
CB EQU 33H
PIC EQU 20H
IMR EQU 21H
INT1 EQU 25H
TIMER EQU 10H
COMP EQU 11H


ORG 40
DW RUT_TIMER


ORG 1000H
BJ DB 0


ORG 2000H
 MOV CL, 0
 MOV AL, 0
 OUT CB, AL
CLI
 MOV AL, 0FDH
 OUT IMR, AL
 MOV AL, 10
 OUT INT1, AL
 MOV AL, 1
 OUT COMP, AL
 MOV AL, 0
 OUT TIMER, AL
STI
LOOP: JMP LOOP


ORG 3000H
RUT_TIMER:CMP BJ, 1
 JZ BAJAR
 CMP CL, 80H
 JZ BAJAR
SUBIR:MOV BJ, 0
 CMP CL, 0
 JZ CERO
 ADD CL, CL
 JMP LUCES
CERO:MOV CL, 1
 JMP LUCES
BAJAR:MOV BJ, 1
 MOV CH, 7
DIV2:ADD CL, CL
 ADC CL, 0
 DEC CH
 CMP CH, 0
 JNZ DIV2
 CMP CL, 0
 JZ SUBIR
 CMP CL, 1
 JNZ LUCES
 MOV BJ, 0
LUCES:MOV AL, CL
 OUT PB, AL
 MOV AL, PIC
 OUT PIC, AL
 MOV AL, 0
 OUT TIMER, AL
 IRET
END
