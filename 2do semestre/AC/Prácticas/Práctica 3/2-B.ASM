PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
MSJ DB "ORGANIZACION Y ARQUITECTURA DE COMPUTADORAS."
FIN DB ?

ORG 2000H
 MOV AL, 0
 OUT CB, AL
 MOV AL, 11111101B
 OUT CA, AL
 IN AL, PA
 AND AL, 11111101B
 OUT PA, AL
 MOV BX, OFFSET MSJ
 MOV CL, OFFSET FIN-OFFSET MSJ

POLL:IN AL, PA
 AND AL, 1
 JNZ POLL
 MOV AL, [BX]
 OUT PB, AL

 IN AL, PA
 OR AL, 00000010B
 OUT PA, AL

 IN AL, PA
 AND AL, 11111101B
 OUT PA, AL
 
 INC BX
 DEC CL
 JNZ POLL
 HLT
 END
 