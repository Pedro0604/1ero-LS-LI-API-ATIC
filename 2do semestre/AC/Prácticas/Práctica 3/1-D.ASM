PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H
TIMER EQU 10H
COMP EQU 11H
PIC EQU 20H
IMR EQU 21H
INT1 EQU 25H


ORG 40
 DW RUT_TIMER


ORG 2000H
 MOV AL, 0
 OUT CB, AL
 MOV AL, 0FFH
 OUT CA, AL
CLI
 MOV AL, 11111101B
 OUT IMR, AL
 MOV AL, 10
 OUT INT1, AL
 MOV AL, 1
 OUT COMP, AL
 MOV AL, 0
 OUT TIMER, AL
STI
LOOP: JMP LOOP


ORG 3000H
RUT_TIMER: CMP CL, 0FFH
 JZ TERMINO
 INC CL
 IN AL, PA
 AND AL, CL
 OUT PB, AL
 MOV AL, PIC
 OUT PIC, AL
 MOV AL, 0
 OUT TIMER, AL
 IRET 


TERMINO: HLT
END
