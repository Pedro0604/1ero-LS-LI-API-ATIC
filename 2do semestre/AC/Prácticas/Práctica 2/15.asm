 PIC EQU 20H
 IMR EQU 21H
 TIMER EQU 10H
 COMP EQU 11H
 INT0 EQU 24H
 INT1 EQU 25H

ORG 40
DW RUT_F10

ORG 44
DW RUT_TIMER


ORG 1000H
 MSJ DB "INGRESE UN NUMERO: "
 NUM DB ?
 SALTO DB 0AH


INGRESE_UN_NUMERO:MOV BX, OFFSET MSJ
 MOV AL, OFFSET NUM-OFFSET MSJ
 INT 7
 MOV BX, OFFSET NUM
 INT 6
 RET


ORG 2000H
 CLI
 MOV AL, 11111110B
 OUT IMR, AL
 MOV AL, 10
 OUT INT0, AL
 MOV AL, 11
 OUT INT1, AL
 CALL INGRESE_UN_NUMERO
 STI
LOOP: JMP LOOP


ORG 3100H
RUT_F10:CLI
 MOV AL, 11111100B
 OUT IMR, AL
 MOV AL, 1
 OUT COMP, AL
 MOV AL, PIC
 OUT PIC, AL
 MOV AL, 0
 OUT TIMER, AL
 STI
 IRET


RUT_TIMER:MOV AL, 2
 INT 7
 DEC BYTE PTR [BX]
 CMP BYTE PTR [BX], 2FH
 JZ TERMINO
 MOV AL, PIC
 OUT PIC, AL
 MOV AL, 0
 OUT TIMER, AL
 IRET
TERMINO:HLT
END
